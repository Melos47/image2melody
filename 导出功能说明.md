# 导出功能说明

## 🎉 新增功能

Image2Melody 现在支持**多格式导出**！

---

## 📦 可以导出什么？

动画播放完成后，会出现这些按钮：

```
[ MIDI ]  [ VIDEO ]  [ AUDIO ]  [ NEW ]
```

### 1. **MIDI** - 音乐文件
- 标准 MIDI 格式 (.mid)
- 可导入任何音乐软件 (FL Studio, Ableton, Logic Pro)
- 可编辑的音符数据

### 2. **VIDEO** - 视频动画
- MP4 或 AVI 格式
- 包含所有 bitmap 效果和 glitch 历史
- 不包含音频（需单独导出）

### 3. **AUDIO** - 音频波形
- WAV 文件 (44.1kHz, 16-bit)
- 纯 8-bit 方波音频
- 可与视频合并

---

## 🚀 使用方法

### 基本流程

1. **加载图片** - 点击 "LOAD IMAGE"
2. **运行动画** - 等待播放完成
3. **导出文件**:
   - 点击 **MIDI** 保存音乐
   - 点击 **VIDEO** 保存动画
   - 点击 **AUDIO** 保存声音
4. **加载新图片** - 点击 **NEW**

### 创建带音频的视频

**方法 A: 使用视频编辑软件（推荐）**

1. 导出 VIDEO 为 `animation.mp4`
2. 导出 AUDIO 为 `sound.wav`
3. 在视频编辑器中合并（Premiere, DaVinci Resolve, iMovie）
4. 对齐音视频轨道，导出最终视频

**方法 B: 命令行（高级）**

```bash
# 使用 ffmpeg 合并
ffmpeg -i animation.mp4 -i sound.wav -c:v copy -c:a aac output.mp4
```

---

## 📋 依赖安装

### 视频导出需要额外安装

```bash
pip install imageio imageio-ffmpeg
```

或者更新所有依赖：

```bash
pip install -r requirements.txt
```

---

## 💡 使用建议

1. **先用小图片测试** - 大图片 = 更多帧 = 更长导出时间
2. **导出所有格式** - 保留所有选项
3. **保留 MIDI 文件** - 以后可以用不同音色重新渲染
4. **使用专业工具合并** - DaVinci Resolve（免费）效果最好

---

## 📚 详细文档

完整导出指南: [`docs/EXPORT_GUIDE.md`](docs/EXPORT_GUIDE.md)

---

## 🐛 常见问题

### "imageio library is required" 错误

```bash
pip install imageio imageio-ffmpeg
```

### 没有显示 VIDEO/AUDIO 按钮

- 动画必须完整播放完成
- 不要提前按 STOP
- 只在动画播放时录制帧

### 导出很慢

- 500+ 帧的动画需要时间
- FFmpeg 编码需要处理时间
- 查看终端了解进度

---

## 🎨 示例工作流程

```
1. 加载 flower.jpg
2. 观看动画（2分钟）
3. 导出:
   ├─ flower_melody.mid  (音乐)
   ├─ flower_anim.mp4    (视频)
   └─ flower_audio.wav   (音频)
4. 在 DaVinci Resolve 中合并
5. 分享到社交媒体! 🎉
```

---

**享受创作 glitch art 音乐视频的乐趣！** 🎨🎵
